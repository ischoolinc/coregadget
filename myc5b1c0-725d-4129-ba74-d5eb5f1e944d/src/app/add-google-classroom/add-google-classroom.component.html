<div>
  <div *ngIf="processState === 101" class="mx-2">
    <p class="text-2xl font-semibold text-gray-text1 mt-4">新增Google Classroom</p>
    <p class="text-base text-gray-text3 px-2 mt-2" style="color: #F43F5E">課程成員限 Google 教育帳號</p>
    <p class="text-base font-semibold text-gray-text1 px-2 mt-10 border-l-4 border-primary">建立新的教室
    <div>
      <p class="text-sm ml-2 mt-2 mb-4 text-gray-text3 px-1">建立教室 ({{ data.target.TargetName }})</p>
      <button class="w-full btn btn-primary mt-2 mb-10"
        [ngClass]="{'btn-disable cursor-not-allowed': !adminConnectedGoogle}"
        [disabled]="!adminConnectedGoogle"
        (click)="asyncGoogleClassroomCourse(data.target, 'create')">開始建立</button>
    </div>
    <div class="mt-8 text-center">
      <p class="text-gray text-sm overflow-hidden">--- 或 ---</p>
    </div>
    <div>
      <p class="text-base font-semibold text-gray-text1 px-2 mt-10 border-l-4 border-primary">連結現有教室
      <p class="text-sm ml-2 mt-2 mb-4 text-gray-text3 px-1">更改「教室連結」即可更換不同雲端教室</p>
      <input type="text" #inputLink
        [formControl]="googleClassroomLink"
        class="w-full text-gray-text1 border border-gray-light rounded h-10 focus:border-primary no-ring"
        placeholder="請提供 Google Classroom 超連結">
      <button class="w-full btn btn-primary mt-6 mb-10"
        [ngClass]="{'btn-disable cursor-not-allowed': !adminConnectedGoogle}"
        [disabled]="!adminConnectedGoogle"
        (click)="asyncGoogleClassroomCourse(data.target, 'link')">開始連結</button>
    </div>
  </div>
  <div *ngIf="processState === 102" class="mt-36 mb-52">
    <img class="mx-auto" src="/assets/img/loading.svg" alt="loading">
    <p class="text-2xl font-semibold text-center mt-4">正在建立課程
      <br>請稍候
      <br>{{((progressBar.current * 100) / progressBar.max).toFixed()}}%
    </p>
  </div>
  <div *ngIf="processState === 103" class="mt-36 mb-52">
    <img class="mx-auto" src="/assets/img/loading.svg" alt="loading">
    <p class="text-2xl font-semibold text-center mt-4">正在連結課程
      <br>請稍候
      <br>{{((progressBar.current * 100) / progressBar.max).toFixed()}}%
    </p>
  </div>
  <div *ngIf="processState === 201" class="mx-2">
    <p class="text-2xl font-semibold text-gray-text1 mt-4">同步雲端服務</p>
    <p class="text-base font-semibold text-gray-text1 px-2 mt-4 border-l-2 border-primary">管理Google Classroom</p>
    <p class="text-sm mt-6">同步學生({{ data.target.TargetName }})</p>
    <button class="w-full btn btn-primary mt-6 mb-10"
      [ngClass]="{'btn-disable cursor-not-allowed': !adminConnectedGoogle}"
      (click)="asyncGoogleClassroomCourse(data.target, 'update')">開始同步</button>
    <div class="mt-6"></div>
  </div>
  <div *ngIf="processState === 202" class="mt-36 mb-52">
    <img class="mx-auto" src="/assets/img/loading.svg" alt="loading">
    <p class="text-2xl font-semibold text-center mt-4">正在同步
      <br>請稍候
      <br>{{((progressBar.current * 100) / progressBar.max).toFixed()}}%
    </p>
  </div>
  <div *ngIf="processState === 2000" class="mt-20">
    <img class="mx-auto mb-4" src="/assets/img/success.svg" alt="loading">
    <p class="text-2xl font-semibold text-center text-success mb-4">完成</p>
    <div class="text-center mb-4">{{createStudentMsg}}</div>
    <div class="flex justify-around mb-20 text-sm text-gray-text3">
      <div></div>
      <div>
        <div class="leading-7">1. 已加入的學生不會重複建立</div>
        <div class="leading-7">2. 非 Google 教育帳號不能被加入</div>
        <div class="leading-7">3. 學生異動後，可使用同步功能自動加入</div>
      </div>
      <div></div>
    </div>
    <div class="text-right mb-2">
      <button mat-dialog-close
        class="inline-block mr-2 btn py-2 text-gray-text3 px-4 border-transparent rounded-full hover:text-primary focus:outline-none"
        >關閉</button>
      <a class="inline-block btn btn-primary px-4" [href]="googleSigninChooserUrl(data.target.GoogleExt?.alternateLink)"
        target="_blank" rel="noreferrer noopener">開啟服務</a>
    </div>
  </div>
  <div *ngIf="processState === 2100" class="mt-20">
    <img class="mx-auto mb-4" src="/assets/img/success.svg" alt="loading">
    <p class="text-2xl font-semibold text-center text-success mb-4">完成</p>
    <div class="text-center mb-4">{{createStudentMsg}}</div>
    <div class="text-right mb-2">
      <button mat-dialog-close
        class="inline-block mr-2 btn py-2 text-gray-text3 px-4 border-transparent rounded-full hover:text-primary focus:outline-none"
        >關閉</button>
      <a class="inline-block btn btn-primary px-4" [href]="googleSigninChooserUrl(data.target.GoogleExt?.alternateLink)"
        target="_blank" rel="noreferrer noopener">開啟服務</a>
    </div>
  </div>
  <div *ngIf="processState === 9999" class="mt-36">
    <img class="mx-auto mb-4" src="/assets/img/error.svg" alt="loading">
    <p class="text-xl font-semibold text-center text-warning mb-48">
      <span *ngIf="!processErrorMsg">哎呀！出了一點問題<br>請稍後再嘗試一次</span>
      <span *ngIf="processErrorMsg">{{processErrorMsg}}</span>
    </p>
    <div class="text-right mb-2">
      <button mat-dialog-close
        class="inline-block mr-2 btn py-2 text-gray-text3 px-4 border-transparent rounded-full hover:text-primary focus:outline-none">關閉</button>
    </div>
  </div>
</div>
