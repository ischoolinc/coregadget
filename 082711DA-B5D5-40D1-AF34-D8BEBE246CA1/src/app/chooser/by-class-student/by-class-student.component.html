<ng-container *ngIf="!loading; else tplLoading">
  <div class="mt-3 mb-3" *ngFor="let classRec of classes">
    <mat-checkbox class="mt-3"
                  color="primary"
                  (change)="classBtnClick(classRec)"
                  [(ngModel)]="classRec.checked"
                  [ngModelOptions]="{standalone: true}">
      {{classRec.ClassName}}班 所有學生(共 {{classRec.StudentIds.length}} 人)
    </mat-checkbox>
    <div class="d-flex flex-row flex-wrap mb-3">
      <mat-checkbox class="mt-2 mr-5"
                    color="primary"
                    *ngFor="let stu of classRec.students"
                    (change)="calcSelectedCount()"
                    [(ngModel)]="stu.checked"
                    [ngModelOptions]="{standalone: true}">
                    <span [innerHTML]="stu.StudentName + '(' + stu.SeatNo + ')'"></span>
      </mat-checkbox>
    </div>
  </div>
</ng-container>
<p [hidden]="!processing" [ngClass]="message.msgClass || ''">{{ message.text }}
</p>

<ng-template #tplLoading>
  <div>loading...</div>
</ng-template>
<ng-template #tplOuterDialogAction>
  <button [hidden]="loading || processing" mat-flat-button color="primary"
          class="add-btn" (click)="confirm()">
    <mat-icon>add</mat-icon>加入學生
  </button>
</ng-template>
