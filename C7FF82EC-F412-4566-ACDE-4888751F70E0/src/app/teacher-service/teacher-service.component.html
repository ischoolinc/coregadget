<div *ngIf="!isLoading  else tmpLoading">
  <div class="inline-block float-right">

    <button *ngIf="Mode.isEditMode()" class="btn btn-info ml-auto btn_bul_rad pin float-right mt-2" style="
  " data-toggle="modal" data-backdrop="static" (click)="saveAll()">
      儲存
    </button>
  </div>
  <div class="" style="width: 100% ;height: 50px ; ">

    <!-- <button *ngIf="!Mode.isEditMode()" class="btn btn-info ml-auto btn_bul_rad pin float-right" style=" margin :5px;"
    (click)="enterTeacherCounselNumber()">編輯
      <i *ngIf="Mode.isViewMode()"
      class="material-icons material-icons-outlined bigger-little" style="font-size: 15px;">mode_edit
    </i>
    </button> -->
    <button *ngIf="!Mode.isEditMode()" class="btn btn-info ml-auto btn_bul_rad pin float-right" style=" margin :5px;"
      (click)="Add()">新增
      <i class="material-icons">add</i>
    </button>
  </div>

  <div class="tab-content " style="padding: 0px">
    <!-- <div class="d-flex">
      <div class="inline-block float-left">

      </div>

    </div> -->
    <!-- <div class="btn-section" 
        style =" width:120px ;

        position :fixed ;
        top :50px ;
        right:5px ;
        z-index: 99;" >

      </div> -->

<!-- 
      ServiceID
: 
"5361474"
ServiceItem
: 
"團體服務"
ServviceDate
: 
"2022-09-20 00:00:00"
targetDetailList
: 
Array(2)
0
: 
ServiceItemDetail {ServiceTarget: '六年級', gender: '女', count: '3'}
1
: 
ServiceItemDetail {ServiceTarget: '六年級', gender: '男', count: '3'}
length
: 
2 -->
    <ul class="rwd-table" style="margin :0px">
      <li class="thead">
        <ol class="tr">
          <li class="sticky-top">服務日期 </li>
          <li class="sticky-top">服務項目</li>
          <li class="sticky-top">內容描述</li>
          <li class="sticky-top">對象(年級) </li>
          <li class="sticky-top">晤談紀錄編號 </li>
          <li class="sticky-top">
            <span>
              編輯
            </span>
            <span>
              刪除
            </span>
          </li>
        </ol>
      </li>
      <li class="tbody">
        <ol class="tr" style="" *ngFor="let item of serviceDataList">
          <ng-container *ngIf="!item.isAddMode">
            <li data-title="服務日期" style="width: 25% !important;"><b>{{ item.ServiceDate }}</b> </li>
            <li data-title="服務項目" style="width: 25% !important;">{{ item.ServiceItem }}</li>

            <li data-title=""  style="width: 25% !important;">
              <div>{{ item.ServiceDescription}}</div> 
            </li>
            <li data-title="對象(年級)" style="width: 25% !important;">
              <div class="teacherNumber">
               {{item.getTargetDetailString()}} 
              </div>
    
              <div>{{ item.TeacherReportRole}}</div>
            </li>

            <li data-title="來自晤談紀錄" style="width: 25% !important;">
                 {{item.CaseInterviewID}}
            </li>
            <li data-title="輔導人力身分" *ngIf="Mode.isEditMode()" style="width: 25% !important;">
              <div class="teacherNumber">
                <div class="">
                  <div class="dropdown ">
                    <button class="btn btn-light dropdown-toggle brad-5" style="border-radius: 5px  !important;"
                      type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                      aria-expanded="false">
                      {{item?.TeacherReportRole  || '    --    ' }} 
                    </button>
                    <div class="dropdown-menu brad-5 " aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item cuser" (click)="setSelectReportRoleOption(item ,role)"
                        *ngFor="let role of reportRolesOptions">{{ role }}</a>
                    </div>
                  </div>
                </div>
              </div>
            </li>

            <li data-title="刪除">
              <!-- <button class="btn  ml-auto delete_btn_sm"
                    data-toggle="modal"
                    data-backdrop="static"
                    (click)="delete(item)">
              刪除
           
            </button> -->
            <mat-icon aria-hidden="false" aria-label="Example home icon"
            style="color:  #4d94ff; cursor:pointer ;font-size: 17px; " (click)="edit(item)">
            mode_edit
          </mat-icon>
              <mat-icon style=" color:  #E05D5D !important; font-size: 17px;" class="" aria-hidden="false" aria-label="Example home icon"
              (click)="delete(item)">
              highlight_off
            </mat-icon>
            </li>

          </ng-container>
          <!-- 新增模式 -->
          <ng-container *ngIf="item.isAddMode">

            <li data-title="姓名">
              <mat-form-field class="example-full-width">
                <input type="text" placeholder="請選擇老師" aria-label="Number" matInput [formControl]="myControl"
                  [matAutocomplete]="auto">
                <mat-autocomplete #auto="matAutocomplete" (optionSelected)='SetSelectTeacherName($event.option.value)'>
                  <mat-option *ngFor="let option  of filteredOptions | async" [value]="option">
                    {{option}}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>

            </li>
            <li data-title="身分">{{ item.Role }}</li>
            <li data-title="教師編碼" *ngIf="Mode.isAddMode()">

              <div>
                <input style="
             color :rgb(90, 90, 90) ;
             width: 200px;
             background: rgb(247, 247, 247);
             border-radius: 5px;
             border :none;
             height:36px ;
             border-bottom: 1.7px dashed #b1bacc  ;
             " type="text" [(ngModel)]="item.TeacherCounselNumber">

              </div>
            </li>
            <li data-title="刪除">
              <!-- <button class="btn  ml-auto delete_btn_sm"
                    data-toggle="modal"
                    data-backdrop="static"
                    (click)="delete(item)">
              刪除
           
            </button> -->
              <mat-icon *ngIf="!Mode.isEditMode()" style=" color:  #E05D5D !important;" class="" aria-hidden="false"
                aria-label="Example home icon" (click)="delete(item)">
                highlight_off
              </mat-icon>
            </li>
          </ng-container>
        </ol>
      </li>
    </ul>
  </div>


</div>

<ng-template #tmpLoading class="container">
  <div class="row justify-content-center" style="margin-top:250px;margin-bottom:200px;">
    Loading...
  </div>
</ng-template>


<app-add-service-modal  #addServiceModal></app-add-service-modal>

<app-del-service-modal #delServiceModal></app-del-service-modal>
<!-- <app-add-counsel-teacher-role-modal #addCounselTeacherRole></app-add-counsel-teacher-role-modal>
<app-del-counsel-teacher-role-modal #delCounselTeacherRole></app-del-counsel-teacher-role-modal> -->