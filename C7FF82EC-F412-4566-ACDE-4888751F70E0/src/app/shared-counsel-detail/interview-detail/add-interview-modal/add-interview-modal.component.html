<!-- 新增／修改輔導 Modal -->

<div class="modal fade"
     id="addInterview"
     tabindex="-1"
     role="dialog"
     aria-labelledby="addInterviewLabel"
     aria-hidden="true">
  <div class="modal-dialog"
       role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"
            id="addInterviewLabel">
          {{ editModeString }}輔導紀錄 - {{ _studentName }}
        </h5>
        <button type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
                (click)="cancel()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <div class="form-group col-md-4">
            <label for="schoolYear"
                   class="col-form-label">
              <span *ngIf="!_CounselInterview.isSchoolYearHasValue"
                    class="text-samll text-danger">*</span>
              學年度
            </label>
            <input type="text"
                   class="form-control"
                   id="schoolYear"
                   placeholder="請輸入學年度"
                   required
                   [(ngModel)]="_CounselInterview.SchoolYear"
                   (keyup)="_CounselInterview.checkValue()" />
          </div>
          <div class="form-group col-md-4">
            <label for="semester"
                   class="col-form-label">
              <span class="text-samll text-danger"
                    *ngIf="!_CounselInterview.isSemesterHasValue">*</span>
              學期
            </label>
            <input type="text"
                   class="form-control"
                   id="semester"
                   placeholder="請輸入學期"
                   [(ngModel)]="_CounselInterview.Semester"
                   (keyup)="_CounselInterview.checkValue()" />
          </div>
          <div class="form-group col-md-4">
            <label for="interviewDate"
                   class="col-form-label">
              <span class="text-samll text-danger"
                    *ngIf="!_CounselInterview.isOccurDateHasValue">*</span>
              日期
            </label>
            <input type="date"
                   class="form-control"
                   id="interviewDate"
                   placeholder="請輸入日期"
                   [(ngModel)]="_CounselInterview.OccurDate"
                   (keyup)="_CounselInterview.checkValue()" />
          </div>
        </div>
        <div class="form-group">
          <label class="col-form-label">
            <span class="text-samll text-danger"
                  *ngIf="!_CounselInterview.isCounselTypeHasValue">*</span> 方式
          </label>
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <button class="btn btn-light dropdown-toggle"
                      type="button"
                      data-toggle="dropdown"
                      aria-haspopup="true"
                      aria-expanded="false">
                {{ _CounselInterview.selectCounselType }}
              </button>
              <div class="dropdown-menu">
                <a class="dropdown-item"
                   (click)="_CounselInterview.setCounselType('面談')">面談</a>
                <a class="dropdown-item"
                   (click)="_CounselInterview.setCounselType('電話')">電話</a>
                <a class="dropdown-item"
                   (click)="_CounselInterview.setCounselType('聯絡簿')">聯絡簿</a>
                <a class="dropdown-item"
                   (click)="_CounselInterview.setCounselType('個別約談家長')">個別約談家長</a>
                <a class="dropdown-item"
                   (click)="_CounselInterview.setCounselType('其他')">其他</a>
              </div>
            </div>
            <ng-container *ngIf="_CounselInterview.isCounselTypeOtherDisable === false">
              <input type="text"
                     id="CounselType"
                     class="form-control"
                     [(ngModel)]="_CounselInterview.CounselTypeOther" />
            </ng-container>
          </div>
        </div>

        <div class="form-group">
          <label class="col-form-label">
            <span class="text-samll text-danger"
                  *ngIf="!_CounselInterview.isContactNameHasValue">*</span> 對象
          </label>
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <button class="btn btn-light dropdown-toggle"
                      type="button"
                      data-toggle="dropdown"
                      aria-haspopup="true"
                      aria-expanded="false">
                {{ _CounselInterview.selectContactName }}
              </button>
              <div class="dropdown-menu">
                <a class="dropdown-item"
                   (click)="_CounselInterview.setContactName('學生')">學生</a>
                <a class="dropdown-item"
                   (click)="_CounselInterview.setContactName('教職員')">教職員</a>
                <a class="dropdown-item"
                   (click)="_CounselInterview.setContactName('家長')">家長</a>
                <a class="dropdown-item"
                   (click)="_CounselInterview.setContactName('專業人員')">專業人員</a>
                <a class="dropdown-item"
                   (click)="_CounselInterview.setContactName('其他')">其他</a>
              </div>
            </div>
            <ng-container *ngIf="_CounselInterview.isContactNameOtherDisable === false">
              <input type="text"
                     id="CounselType"
                     class="form-control"
                     [(ngModel)]="_CounselInterview.ContactNameOther" />
            </ng-container>
          </div>
        </div>

        <div class="form-row">
          <!-- <div class="form-group col-md-6">
            <label for="interviewee"
                   class="col-form-label">
              <span class="text-samll text-danger"
                    *ngIf="!_CounselInterview.isContactNameHasValue">*</span>
              對象
            </label>
            <input type="text"
                   class="form-control"
                   id="interviewee"
                   placeholder="請輸入對象"
                   [(ngModel)]="_CounselInterview.ContactName"
                   (keyup)="_CounselInterview.checkValue()" />
          </div> -->
          <div class="form-group col-md-6">
            <div class="custom-control custom-checkbox">
              <input type="checkbox"
                     class="custom-control-input"
                     id="isPublic"
                     [(ngModel)]="_CounselInterview.isPublic" />
              <label class="custom-control-label"
                     for="isPublic">公開</label>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="recorder"
                   class="col-form-label">
              <span class="text-samll text-danger"></span> 記錄者
            </label>
            <label class="form-control"
                   id="recorder">{{
              _CounselInterview.AuthorName
              }}</label>
          </div>
        </div>
        <div class="form-group">
          <label for="contactMatter"
                 class="col-form-label">
            <span class="text-samll text-danger"
                  *ngIf="!_CounselInterview.isContactItemHasValue">*</span>
            聯絡事項
          </label>
          <textarea class="form-control"
                    id="contactMatter"
                    rows="3"
                    placeholder="請輸入聯絡事項"
                    [(ngModel)]="_CounselInterview.ContactItem"
                    (keyup)="_CounselInterview.checkValue()"></textarea>
        </div>
        <div class="form-group">
          <label for="description"
                 class="col-form-label">
            <span class="text-samll text-danger"
                  *ngIf="!_CounselInterview.isContentHasValue">*</span>
            輔導內容
            <span class="text-muted">（會顯示於輔導記錄卡）</span>
          </label>
          <textarea class="form-control"
                    id="description"
                    rows="3"
                    placeholder="請輸入輔導內容"
                    [(ngModel)]="_CounselInterview.Content"
                    (keyup)="_CounselInterview.checkValue()"></textarea>
        </div>

        <div class="form-group">
          <label for="semester"
                 class="col-form-label">
            <span class="text-samll text-danger"
                  *ngIf="!_CounselInterview.isCategoryHasValue">*</span>
            類別
          </label>
          <div class="d-flex flex-wrap">
            <div class="custom-control custom-checkbox w-25"
                 *ngFor="let item of _CounselInterview._category">
              <input type="checkbox"
                     class="custom-control-input"
                     [id]="item.answer_code"
                     [checked]="item.answer_checked"
                     (click)="item.setAnswerCheck()"
                     (change)="checkChange(item,_CounselInterview)" />
              <label class="custom-control-label"
                     [for]="item.answer_code">
                <app-sentence [text]="item.answer_text"
                              [(ngModel)]="item.answer_martix"></app-sentence>
              </label>
            </div>
          </div>
        </div>

        <ng-container *ngIf="referralVisible === true">
          <div class="custom-control custom-checkbox">
            <input type="checkbox"
                   class="custom-control-input"
                   id="referral"
                   [(ngModel)]="_CounselInterview.isReferralValue" />
            <label class="custom-control-label"
                   for="referral">轉介輔導室</label>
          </div>
          <div class="form-group"
               *ngIf="_CounselInterview.isReferralValue">
            <label for="referralDescription"
                   class="col-form-label">轉介說明(學生問題概述，轉介原因及希望協助的事項)</label>
            <textarea class="form-control"
                      id="referralDescription"
                      rows="3"
                      placeholder="請輸入轉介說明"
                      [(ngModel)]="_CounselInterview.ReferralDesc"></textarea>
          </div>
        </ng-container>

      </div>
      <div class="modal-footer">
        <button type="button"
                class="btn btn-dark"
                data-dismiss="modal"
                (click)="cancel()">
          取消
        </button>
        <button type="button"
                class="btn btn-info"
                (click)="save()"
                [disabled]="_CounselInterview.isSaveDisable">
          儲存
        </button>
      </div>
    </div>
  </div>
</div>