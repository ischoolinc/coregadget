<!-- tab 系統管理 -->
<div *ngIf="!isLoading && adminComponent.isRoleEnable; else tmpLoading">
  <div class="inline-block float-right">

    <button *ngIf="Mode.isEditMode()" class="btn btn-info ml-auto btn_bul_rad pin float-right mt-2" style="
  " data-toggle="modal" data-backdrop="static" (click)="saveAll()">
      儲存
    </button>
  </div>
  <div class="" style="width: 100% ;height: 50px ; ">

    <button *ngIf="!Mode.isEditMode()" class="btn btn-info ml-auto btn_bul_rad pin float-right" style=" margin :5px;"
    (click)="enterTeacherCounselNumber()">編輯
      <i *ngIf="Mode.isViewMode()"
      class="material-icons material-icons-outlined bigger-little" style="font-size: 15px;">mode_edit
    </i>
    </button>
    <button *ngIf="!Mode.isEditMode()" class="btn btn-info ml-auto btn_bul_rad pin float-right" style=" margin :5px;"
      (click)="Add()">新增
      <i class="material-icons">add</i>
    </button>
  </div>

  <div class="tab-content " style="padding: 0px">
    <!-- <div class="d-flex">
      <div class="inline-block float-left">

      </div>

    </div> -->
    <!-- <div class="btn-section" 
        style =" width:120px ;

        position :fixed ;
        top :50px ;
        right:5px ;
        z-index: 99;" >

      </div> -->
    <ul class="rwd-table" style="margin :0px">
      <li class="thead">
        <ol class="tr">
          <li class="sticky-top">教師姓名 </li>
          <li class="sticky-top">{{teacherTypeStr}}</li>
          <li class="sticky-top">教師編碼
   
          </li>
          <li class="sticky-top table_header" style="">輔導人力身分
              <mat-icon  (mouseover)="isShowInfo = true" (mouseout)="isShowInfo = false"  aria-hidden="false" aria-label="Example home icon"
              style="cursor:pointer ;font-size: 17px;  position:relative"  class="material-symbols-outlined material-icons-align" (click)="edit(item)">
                info
        </mat-icon>
        <div *ngIf="isShowInfo"  class="info_section "  style="  position:absolute ;left :-1px  ;bottom :-50px ;z-index: 9999;">
          輔導人力身分顯示於月統計報表中，非必填
        </div>
          </li>
          <li class="sticky-top">
            <span>
              刪除
            </span>
          </li>
        </ol>
      </li>
      <li class="tbody">
        <ol class="tr" style="" *ngFor="let item of teachersCounselRoles">
          <ng-container *ngIf="!item.isAddMode">
            <li data-title="姓名" style="width: 25% !important;"><b>{{ item.TeacherName }}</b> </li>
            <li data-title="身分" style="width: 25% !important;">{{ item.Role }}</li>
            <li data-title="教師編碼" *ngIf="!Mode.isEditMode()" style="width: 25% !important;">
              <div>{{ item.TeacherCounselNumber}}</div>
            </li>
            <li data-title="教師編碼" *ngIf="Mode.isEditMode()" style="width: 25% !important;">
              <div class="teacherNumber">
                <input style="
             color :rgb(90, 90, 90) ;
             width: 160px;
             background: #f1f3f3;
             border-radius: 2px;
             border :none;
             height:36px ;
             border-bottom: 1.7px  solid #c2cee5  ;
             " type="text" [(ngModel)]="item.TeacherCounselNumber"
              (focusout) = "checkTeacherNum(item)">
              </div>
            </li>
            <!--   -->
            <li data-title="輔導人力身分" *ngIf="!Mode.isEditMode()" style="width: 25% !important;">
              <div>{{ item.TeacherReportRole}}</div>
            </li>
            <li data-title="輔導人力身分" *ngIf="Mode.isEditMode()" style="width: 25% !important;">
              <div class="teacherNumber">
                <div class="">
                  <div class="dropdown ">
                    <button class="btn btn-light dropdown-toggle brad-5" style="border-radius: 5px  !important;"
                      type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                      aria-expanded="false">
                      {{item?.TeacherReportRole  || '    --    ' }}
                    </button>
                    <div class="dropdown-menu brad-5 " aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item cuser" (click)="setSelectReportRoleOption(item ,role)"
                        *ngFor="let role of reportRolesOptions">{{ role }}</a>
                    </div>
                  </div>
                </div>
              </div>
            </li>

            <li data-title="刪除">
              <!-- <button class="btn  ml-auto delete_btn_sm"
                    data-toggle="modal"
                    data-backdrop="static"
                    (click)="delete(item)">
              刪除
           
            </button> -->
              <mat-icon style=" color:  #E05D5D !important; font-size: 17px;" class="" aria-hidden="false" aria-label="Example home icon"
                (click)="delete(item)">
                highlight_off
              </mat-icon>
            </li>

          </ng-container>
          <!-- 新增模式 -->
          <ng-container *ngIf="item.isAddMode">

            <li data-title="姓名">
              <mat-form-field class="example-full-width">
                <input type="text" placeholder="請選擇老師" aria-label="Number" matInput [formControl]="myControl"
                  [matAutocomplete]="auto">
                <mat-autocomplete #auto="matAutocomplete" (optionSelected)='SetSelectTeacherName($event.option.value)'>
                  <mat-option *ngFor="let option  of filteredOptions | async" [value]="option">
                    {{option}}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>

            </li>
            <li data-title="身分">{{ item.Role }}</li>
            <li data-title="教師編碼" *ngIf="Mode.isAddMode()">

              <div>
                <input style="
             color :rgb(90, 90, 90) ;
             width: 200px;
             background: rgb(247, 247, 247);
             border-radius: 5px;
             border :none;
             height:36px ;
             border-bottom: 1.7px dashed #b1bacc  ;
             " type="text" [(ngModel)]="item.TeacherCounselNumber">

              </div>
            </li>
            <li data-title="刪除">
              <!-- <button class="btn  ml-auto delete_btn_sm"
                    data-toggle="modal"
                    data-backdrop="static"
                    (click)="delete(item)">
              刪除
           
            </button> -->
              <mat-icon *ngIf="!Mode.isEditMode()" style=" color:  #E05D5D !important;" class="" aria-hidden="false"
                aria-label="Example home icon" (click)="delete(item)">
                highlight_off
              </mat-icon>
            </li>
          </ng-container>
        </ol>
      </li>
    </ul>
  </div>


</div>

<ng-template #tmpLoading class="container">
  <div class="row justify-content-center" style="margin-top:250px;margin-bottom:200px;">
    Loading...
  </div>
</ng-template>

<app-add-counsel-teacher-role-modal #addCounselTeacherRole></app-add-counsel-teacher-role-modal>
<app-del-counsel-teacher-role-modal #delCounselTeacherRole></app-del-counsel-teacher-role-modal>