<div>
    <nav aria-label="breadcrumb text-nowrap text-truncate">
        <ol class="breadcrumb">
            <li class="breadcrumb-item active" aria-current="page">課堂點名（{{today}}）</li>
        </ol>
    </nav>

    <h3>今日點名</h3>
    <div class="d-flex">

        <ng-container *ngIf="loading;else j_table">
            <mat-spinner diameter="35"></mat-spinner>
        </ng-container>
        <ng-template #j_table>
            <table mat-table [dataSource]="conf.Schedule" class="mat-elevation-z2 m-2 flex-fill">

                <ng-container matColumnDef="Period">
                    <th mat-header-cell *matHeaderCellDef class="dy-header-cell">節次</th>
                    <td mat-cell *matCellDef="let element" class="dy-fone-size">{{element.Period}}</td>
                </ng-container>

                <ng-container matColumnDef="Name">
                    <th mat-header-cell *matHeaderCellDef class="dy-header-cell">名稱(班級/課程)</th>
                    <td mat-cell *matCellDef="let element" class="dy-fone-size">{{element.ClassName?element.ClassName:element.CourseName}}</td>
                </ng-container>

                <ng-container matColumnDef="StudentCount">
                    <th mat-header-cell *matHeaderCellDef class="dy-header-cell">學生數</th>
                    <td mat-cell *matCellDef="let element" class="dy-fone-size">{{element.StudentCount}}</td>
                </ng-container>

                <ng-container matColumnDef="Checked">
                    <th mat-header-cell *matHeaderCellDef class="dy-header-cell">已點名</th>
                    <td mat-cell *matCellDef="let element" class="dy-fone-size">
                        <mat-icon color="primary">{{element.Checked=='true'?'check_circle':''}}</mat-icon>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="scheduleColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: scheduleColumns;" class="example-element-row" (click)="openSchedule(row)"></tr>
            </table>
        </ng-template>
    </div>

    <div class="d-flex justify-content-between">
        <h3>課程</h3>
        <ng-container [ngTemplateOutlet]="save"></ng-container>
    </div>
    <div class="d-flex">

        <ng-container *ngIf="loading;else t_table">
            <mat-spinner diameter="35"></mat-spinner>
        </ng-container>
        <ng-template #t_table>
            <table mat-table [dataSource]="conf.CourseConf" class="mat-elevation-z2 m-2 flex-fill">

                <ng-container matColumnDef="CourseName">
                    <th mat-header-cell *matHeaderCellDef class="dy-header-cell">課程名稱</th>
                    <td mat-cell *matCellDef="let element" class="dy-fone-size">{{element.CourseName}}</td>
                </ng-container>


                <tr mat-header-row *matHeaderRowDef="courseColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: courseColumns;" class="example-element-row" (click)="openPicker(row)"></tr>
            </table>
        </ng-template>
    </div>

    <ng-template #save>
        <button type="button" class="btn btn-lg btn-info" (click)="openSubstitute()"><mat-icon>how_to_reg</mat-icon> 代課課程</button>
    </ng-template>

</div>